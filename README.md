📈 GRU 기반 비트코인 알고리즘 트레이딩 모델

1. 프로젝트 개요
이 프로젝트는 기존 LSTM 시계열 예측 모델의 한계를 극복하고자 GRU(Gated Recurrent Unit) 구조를 도입했습니다. 단순한 가격 예측을 넘어, 하락장 방어와 리스크 관리에 집중한 트레이딩 전략을 구현한 점이 특징입니다.

* 목표: 단순 보유 전략(Buy and Hold)과 비교해 초과 수익(Alpha)을 내고, 최대 낙폭(MDD)을 최소화하는 것
* 핵심 접근법: 딥러닝 모델이 예측한 상승 확률에 기술적 지표(이동평균선)를 결합한 하이브리드 전략 도입

---

2. 모델 아키텍처
LSTM 대신 GRU를 활용하여 계산 효율을 높이고, 변동성이 큰 금융 데이터에도 더 잘 대응할 수 있도록 설계했습니다.

* 모델 구조: 2단 Stacked GRU
* 입력 형태: `(Batch, Sequence_Length=20, Features)`
* 주요 하이퍼파라미터
    * `hidden_size`: 128로 모델 표현력 강화
    * `dropout`: 0.2로 설정해 과적합을 방지
    * `optimizer`: AdamW 방식(가중치 감소 적용)
    * `loss`: BCELoss 사용 (이진 분류)
* 출력: Sigmoid 함수로 0~1 사이의 상승 확률 산출

---

3. 트레이딩 전략
예측 값만 무작정 따르지 않고, ‘잃지 않는 투자’를 위해 두 가지 필터와 자산 비중 조절 전략을 더했습니다.

3.1. 진입 및 청산 로직
1.  AI 모델 필터: 예측 확률이 0.65(65%)를 넘을 때만 매수 신호로 간주합니다. 기존보다 기준을 높여 신뢰성을 확보했습니다.
2.  추세 필터: 현재 가격이 20일 이동평균선(MA20) 위에 있을 때만 진입합니다.
3.  손실 방어: 가격이 MA20 아래로 하락하면 즉시 보유 자산을 모두 매도하고, 현금으로 대기합니다.

3.2. 자금 관리
* 켈리 공식 변형
    * 정해진 금액을 투자하는 대신, 예측 확률에 따라 자산 비중을 조절합니다.
    * 공식: `투자 비중 = (예측 확률 × 2) - 1`
    * 예를 들어, 상승 확률이 70%일 때 자산의 40%를 투자(확신이 높을수록 비중 확대)

---

4. 백테스팅 결과
2024년 11월부터 2025년 12월까지 데이터를 대상으로 시뮬레이션을 실시했습니다.

# 📊 수익률 요약
| 구분 | 수익률 | 비고 |
| Benchmark (Buy & Hold) | -3.73% | 시장 하락 |
| My Model (GRU + 전략) | +0.94% | 수익 전환 성공 |
| 초과 수익(Alpha) | +4.67%p | 벤치마크 대비 우위 |

<img width="1488" height="989" alt="image" src="https://github.com/user-attachments/assets/4229ddab-c6bc-4f0e-a9a3-fc2baee9915b" />



 🔍 주요 성과 분석
* 하락장 방어: 2025년 3월과 11월, 시장 급락 시 거래를 중단하고 현금 포지션을 유지해 손실을 피했습니다. 그래프에서 수평 구간으로 확인할 수 있습니다.
* 수익 창출: 5월부터 7월 사이 상승 구간에는 트렌드를 잘 따라가며 수익을 쌓았습니다.
* 결국, 시장 전체는 -3.73%의 손실을 기록했지만, 본 모델은 원금을 지키며 소폭이나마 수익(+0.94%)까지 내어 알고리즘의 효과를 입증했습니다.

---

5. 아쉬운 점 및 개선 방향

5.1. 한계점
* 횡보장 휩소(Whipsaw): 9월~10월경 추세가 불명확한 횡보 구간에서 잦은 매매 신호 발생으로 인해 수수료 비용이 누적되는 경향이 있었습니다.
* 후행성: 이동평균선을 보조 지표로 사용하다 보니, 고점 대비 조금 늦은 시점에 매도가 이루어지는 한계가 있었습니다.

5.2. 개선 아이디어
1.  Transformer 도입: 장기적인 시계열 의존성을 더 잘 포착하기 위해 Time-Series Transformer 모델 적용 고려.
2.  Short 포지션 도입: 현물 매수(Long)뿐만 아니라 선물 매도(Short) 전략을 추가한다면 하락장에서도 적극적인 수익 창출이 가능할 것으로 예상.
3.  매크로 변수 추가: 금리, 환율, 나스닥 지수 등 거시경제 지표를 입력 Feature로 추가하여 시장 상황 인지 능력 강화.

---
